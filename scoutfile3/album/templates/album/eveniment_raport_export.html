{% extends 'base.html' %}

{% block page_title %}
    Raport (export) <span style="font-weight: normal">| {{ an }}</span>
{% endblock %}

{% block extrahead %}
    <script>
        (function ($) {
            $(document).ready(function () {
                $(".toggler").click(function (e) {
                    $("a.edit").toggle();
                        }
                )

            })
        })(jQuery)
    </script>
{% endblock %}

{% block context_menu %}
    {% include "album/main_context_menu.html" %}
{% endblock %}

{% block content %}
    <a href = "#" class = "btn btn-mini btn-primary toggler">Arată / ascunde butoane edit</a>
    <br /><br />
    <table class = "table table-striped">
        <tr>
            <th>Nr. crt.</th>
            <th>Denumire</th>
            <th>Perioada</th>
            <th>Ramura de vârstă</th>
            <th>Participanți</th>
        </tr>
        {% for object in object_list %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ object }}</td>
                <td>{% if object.is_one_day %} {{ object.start_date|date:"l, d F Y" }}, între {{ object.start_date|date:"H:i" }} - {{ object.end_date|date:"H:i"}}
                {% else %}{{ object.start_date|date:"l, d F Y" }} - {{ object.end_date|date:"l, d F Y" }}{% endif %}</td>
                <td>
                    {% for rdv, total in object.get_ramuri_de_varsta.items %}
                        {% if rdv != "lideri" and total.0 != 0 %}
                            {{ rdv }}<br />
                        {% endif %}
                    {% endfor %}
                </td>
                <td>{{ object.total_participanti }}</td>
            </tr>
        {% endfor %}
    </table>

    {% for object in object_list %}
        <h2>{{ object }}</h2>
        {% include "album/eveniment_raport_part.html" %}
    <a class = "btn btn-mini edit" href = "{% url album:eveniment_update slug=object.slug %}"><i class = "icon-pencil"></i> Modifică <strong>{{ object }}</strong></a>
    {% endfor %}

{% endblock %}


